<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">

<link rel="preconnect" href="https://fonts.lug.ustc.edu.cn" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/images/site.webmanifest">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic%7CSF+Mono+Regular:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"pangwong.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Statements">
<meta property="og:type" content="article">
<meta property="og:title" content="Reading Note of CppPrimer-Chapter5">
<meta property="og:url" content="https://pangwong.github.io/blog/2022/05/cpp-primer-chapter5/index.html">
<meta property="og:site_name" content="曰悦鸟">
<meta property="og:description" content="Statements">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-05-29T03:23:17.000Z">
<meta property="article:modified_time" content="2022-05-30T08:08:37.486Z">
<meta property="article:author" content="PangWong">
<meta property="article:tag" content="reading notes">
<meta property="article:tag" content="cpp-primer">
<meta property="article:tag" content="statement">
<meta property="article:tag" content="condition">
<meta property="article:tag" content="loop">
<meta property="article:tag" content="switch">
<meta property="article:tag" content="range-for">
<meta property="article:tag" content="try-catch">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://pangwong.github.io/blog/2022/05/cpp-primer-chapter5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://pangwong.github.io/blog/2022/05/cpp-primer-chapter5/","path":"/blog/2022/05/cpp-primer-chapter5/","title":"Reading Note of CppPrimer-Chapter5"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Reading Note of CppPrimer-Chapter5 | 曰悦鸟</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">曰悦鸟</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Statements"><span class="nav-number">1.</span> <span class="nav-text">Statements</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if-%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.1.</span> <span class="nav-text">if 语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#switch-%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.2.</span> <span class="nav-text">switch 语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while-x2F-do-while%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.3.</span> <span class="nav-text">while&#x2F;do-while语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for-x2F-range-for%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.4.</span> <span class="nav-text">for&#x2F;range-for语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#try-catch"><span class="nav-number">1.5.</span> <span class="nav-text">try catch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#break-x2F-continue-x2F-goto"><span class="nav-number">1.6.</span> <span class="nav-text">break&#x2F;continue&#x2F;goto</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#misc"><span class="nav-number">1.7.</span> <span class="nav-text">misc</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="PangWong"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">PangWong</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">97</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/pangwong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;pangwong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://pangwong.github.io/blog/2022/05/cpp-primer-chapter5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="PangWong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="曰悦鸟">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Reading Note of CppPrimer-Chapter5 | 曰悦鸟">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Reading Note of CppPrimer-Chapter5
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-29 11:23:17" itemprop="dateCreated datePublished" datetime="2022-05-29T11:23:17+08:00">2022-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-30 16:08:37" itemprop="dateModified" datetime="2022-05-30T16:08:37+08:00">2022-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>13k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>12 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="Statements"><a href="#Statements" class="headerlink" title="Statements"></a>Statements</h2><span id="more"></span>



<h3 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h3><ul>
<li><p>cpp规定<strong>悬垂else</strong>(<em>dangling else</em>)<strong>与离他最近的未匹配的if匹配</strong>，从而消除程序二义性；要使<strong>用花括号来控制代码块</strong>，从而确定执行逻辑</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if 1</span></span><br><span class="line"><span class="keyword">if</span>(grade % <span class="number">10</span> &gt;= <span class="number">3</span>)</span><br><span class="line">    <span class="comment">// if 2</span></span><br><span class="line">    <span class="keyword">if</span> (grade % <span class="number">10</span> &gt; <span class="number">7</span>)</span><br><span class="line">        lettergrade += <span class="string">&quot;+&quot;</span></span><br><span class="line">    <span class="comment">// match with if 2 rather than if 1</span></span><br><span class="line">    <span class="keyword">else</span>:        </span><br><span class="line">        letter_grade += <span class="string">&quot;-&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>if条件表达式里，<strong>条件表达式</strong>(<em>condition</em>)的前面可以写<strong>初始化表达式</strong>(<em>init-statement</em>)</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;<span class="type">int</span>, std::string&gt; m;</span><br><span class="line">std::mutex mx;</span><br><span class="line"><span class="keyword">extern</span> <span class="type">bool</span> shared_flag; <span class="comment">// guarded by mx</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">auto</span> it = m.<span class="built_in">find</span>(<span class="number">10</span>); it != m.<span class="built_in">end</span>()) &#123; <span class="keyword">return</span> it-&gt;second.<span class="built_in">size</span>(); &#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="type">char</span> buf[<span class="number">10</span>]; std::<span class="built_in">fgets</span>(buf, <span class="number">10</span>, stdin)) &#123; m[<span class="number">0</span>] += buf; &#125;</span><br><span class="line"><span class="keyword">if</span> (std::lock_guard <span class="built_in">lock</span>(mx); shared_flag) &#123; <span class="built_in">unsafe_ping</span>(); shared_flag = <span class="literal">false</span>; &#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="type">int</span> s; <span class="type">int</span> count = <span class="built_in">ReadBytesWithSignal</span>(&amp;s)) &#123; <span class="built_in">publish</span>(count); <span class="built_in">raise</span>(s); &#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="type">const</span> <span class="keyword">auto</span> keywords = &#123;<span class="string">&quot;if&quot;</span>, <span class="string">&quot;for&quot;</span>, <span class="string">&quot;while&quot;</span>&#125;;</span><br><span class="line">    std::ranges::<span class="built_in">any_of</span>(keywords, [&amp;tok](<span class="type">const</span> <span class="type">char</span>* kw) &#123; <span class="keyword">return</span> tok == kw; &#125;)) &#123;</span><br><span class="line">    std::cerr &lt;&lt; <span class="string">&quot;Token must not be a keyword\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="switch-语句"><a href="#switch-语句" class="headerlink" title="switch 语句"></a>switch 语句</h3><ul>
<li><p>switch控制结构(<em>condition</em>)</p>
<p><code>switch</code>后面的括号里面是一个<strong>表达式</strong>，对求得的表达式的值与case后面的值匹配；</p>
<p>表达式的值为<code>int</code>、<code>char</code>、<code>short</code>、<code>enum</code>以及他们的<code>unsigned</code>形式（可以做integral promotion），也可以是可以<strong>隐式转换为以上类型的类的对象</strong>，或者是<strong>以上类型的初始化语句</strong>(<em>brace-or-equals initializer</em>)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">get_intval</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//void switch_test(short a)&#123;                // valid, short</span></span><br><span class="line"><span class="comment">//void switch_test(int a=get_intval())&#123;       // valid, brace-or-equals initializer</span></span><br><span class="line"><span class="comment">//void switch_test(char a)&#123;                 // valid, char</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">switch_test</span><span class="params">(<span class="type">float</span> a)</span></span>&#123;                  <span class="comment">// invalid, float</span></span><br><span class="line">    <span class="keyword">switch</span>(a+<span class="number">1</span>)&#123;  <span class="comment">// error: statement requires expression of integer type (&#x27;float&#x27; invalid)</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;2&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">IntegralValue</span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">operator</span> <span class="title">int</span><span class="params">()</span> <span class="type">const</span></span>&#123;    <span class="comment">// implicitly convert the class to int</span></span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123; red, green, blue &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//switch(red) &#123;                        // valid, enum type</span></span><br><span class="line"><span class="comment">//switch (auto v = IntegralValue())    // valid, IntegralValue can be implicit conveted to int</span></span><br><span class="line"><span class="keyword">switch</span>(<span class="keyword">auto</span> c = blue) &#123;                <span class="comment">// valid, brace-or-equals initializer</span></span><br><span class="line">    <span class="keyword">case</span> red  : std::cout &lt;&lt; <span class="string">&quot;red\n&quot;</span>;   brenoak;</span><br><span class="line">    <span class="keyword">case</span> green: std::cout &lt;&lt; <span class="string">&quot;green\n&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> blue : std::cout &lt;&lt; <span class="string">&quot;blue\n&quot;</span>;  <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>C++17起，可以在<em>condition</em>前加上<strong>初始化表达式</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (init-statement; condition)&#123;</span><br><span class="line">    <span class="comment">// statements</span></span><br><span class="line">&#125;   </span><br><span class="line"><span class="comment">// similar to</span></span><br><span class="line">init_statement;</span><br><span class="line"><span class="keyword">switch</span> ( condition )&#123;</span><br><span class="line">    <span class="comment">//statements;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Device</span> &#123;</span><br><span class="line">    <span class="keyword">enum</span> &#123; SLEEP, READY, BAD &#125; state_&#123;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">auto</span> <span class="title">state</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> state_; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">switch</span> (<span class="keyword">auto</span> dev = Device&#123;&#125;; dev.<span class="built_in">state</span>()) &#123;</span><br><span class="line">    <span class="keyword">case</span> Device::SLEEP: <span class="comment">/*...*/</span> <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Device::READY: <span class="comment">/*...*/</span> <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Device::BAD: <span class="comment">/*...*/</span> <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>switch <code>case</code> <code>default</code>语句</p>
<p><strong><code>case</code>后面的值须为常量表达式</strong>，可以为<code>int</code>、<code>short</code>、<code>char</code>、<code>enum</code>以及他们的<code>unsigned</code>形式，不可为浮点数；cppreference的说法是：</p>
<blockquote>
<p>a constant expression of the same type as the type of <em>condition</em> after conversions and <a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/implicit_cast">integral promotions</a></p>
</blockquote>
<p>所以比interger小的类型也是OK的，比如说<code>short, char, enum</code>等等；cpp17里面可以对switch表达式的结果进行任意的转换（当没有可行的转换或者integral promitions的时候）以便匹配case的值；</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">switch_test</span><span class="params">(<span class="type">int</span> a)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> case1 = <span class="number">1</span>;                    <span class="comment">// invalid</span></span><br><span class="line">    <span class="comment">// constexpr short case1 = 1;     // valid</span></span><br><span class="line">    <span class="comment">// constexpr char case1 = &#x27;a&#x27;;    // valid</span></span><br><span class="line">    <span class="keyword">switch</span>(a+<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="keyword">case</span> case1: <span class="comment">// error:  case value is not a constexpr expression</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;3&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>当希望两个或者多个值共享一些操作，则可省略这些值之间的break;</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (<span class="type">char</span> ch=<span class="built_in">get_char</span>())&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;e&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;i&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;o&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">        ++vowelCount;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="while-x2F-do-while语句"><a href="#while-x2F-do-while语句" class="headerlink" title="while&#x2F;do-while语句"></a>while&#x2F;do-while语句</h3><ul>
<li><p><code>while</code>的条件表达式可以是一个赋值语句；如果是赋值表达式，则定义在<code>while</code><strong>条件部分</strong>和<code>while</code><strong>循环体</strong>内的变量<strong>每次迭代</strong>都要经历<strong>从创建到销毁</strong>的过程</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (T t=x)&#123;</span><br><span class="line">    statement;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// similar to</span></span><br><span class="line">label:</span><br><span class="line">&#123; <span class="comment">// start of condition scope</span></span><br><span class="line">    T t = x;</span><br><span class="line">    <span class="keyword">if</span> (t) &#123;</span><br><span class="line">        statement</span><br><span class="line">        <span class="keyword">goto</span> label; <span class="comment">// calls the destructor of t</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>无论循环体有几条语句，<code>while</code>循环都生成了一个循环体作用域(<em>loop body scope</em>)；函数体内定义的变量仅仅在函数体作用域可见</p>
</li>
<li><p>do-while和while的区别在于前者是<strong>先执行循环体后判断条件表达式</strong>，而后者是<strong>先判断条件表达式然后再执行循环体</strong></p>
</li>
<li><p>do-while的<em>condition</em> <strong>必须在循环体之前定义</strong>，使之可以在<code>do-block</code>和<code>condition</code>里面都处于作用域内；</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    v *= <span class="number">1</span>;     <span class="comment">// invalid, v is not defined</span></span><br><span class="line">&#125;<span class="keyword">while</span> ((<span class="type">int</span> v = <span class="built_in">get_value</span>()) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> v = <span class="built_in">get_value</span>();</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">   v *= <span class="number">1</span>;     <span class="comment">// valid, v is not defined </span></span><br><span class="line">&#125;<span class="keyword">while</span> ((v = <span class="built_in">get_value</span>()) &gt; <span class="number">0</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="for-x2F-range-for语句"><a href="#for-x2F-range-for语句" class="headerlink" title="for&#x2F;range-for语句"></a>for&#x2F;range-for语句</h3><ul>
<li><p>理解for循环的运行顺序：</p>
<ol>
<li><p><em>init-statement</em> 负责<strong>初始化</strong>一个值，这个值<strong>对于循环一直可见</strong></p>
</li>
<li><p>然后判断<em>condition</em>是否为true，如果为true则<strong>执行一次循环体</strong>；否则不会执行循环体，循环结束</p>
</li>
<li><p>执行<em>iteration-expression</em></p>
</li>
<li><p>2-&gt;3一直循环，<strong>每次执行循环体之前一定会先验证<em>condition</em>是否依然成立</strong></p>
</li>
</ol>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (init-statement; condition; iter-expression)&#123;</span><br><span class="line">    <span class="comment">// loop body</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// similar to</span></span><br><span class="line">init-statement;</span><br><span class="line"><span class="keyword">while</span> (condition) &#123;</span><br><span class="line">    loop-body-statement;</span><br><span class="line">    iter-expression;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>for循环语句中定义的变量<strong>仅仅在for循环体内可见</strong>；</li>
<li>for循环头里面的<strong>initialization</strong>和<strong>expression</strong>都可以使用<strong>逗号运算符</strong>来<strong>定于和更新</strong>多个变量；</li>
<li>for循环头里面的三部分的<strong>任意一部分均可省略</strong>，之后在循环体内实现循环的更新和终止；</li>
<li>空的<em>condition</em>相当于<em>true</em></li>
</ul>
</li>
<li><p>range_for的基本形式</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( range-declaration : range-expression )&#123;</span><br><span class="line">    <span class="comment">// loop-statement</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// similar to</span></span><br><span class="line"><span class="keyword">auto</span> &amp;&amp; __range = range-expression;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> __begin = begin-expr, __end = end-expr; __begin != __end; ++__begin) &#123;</span><br><span class="line">    range-declaration = *__begin;</span><br><span class="line">    loop-statement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>begin-expr</strong> is <em>range</em> and <strong>end-exp</strong>r is (<em>range + bound</em>), where <strong>bound</strong> is the number of elements in the array </li>
<li>if class type C has both a <strong>member</strong> named <strong>begin</strong> and a <strong>member</strong> named <strong>end</strong> then <strong>begin-expr</strong> is <code>range.begin()</code> and <strong>end-expr</strong> is <code>range.end()</code></li>
<li>Otherwise, <strong>begin-expr</strong> is <code>std::begin(range)</code> and <strong>end-expr</strong> is <code>std::end(range)</code></li>
<li>If range-expression returns a <strong>temporary</strong>, its lifetime is <strong>extended until the end of the loop</strong></li>
</ul>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the initializer may be a braced-init-list</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> n : &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;)     </span><br><span class="line">    std::cout &lt;&lt; n &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// the initializer may be an array</span></span><br><span class="line"><span class="type">int</span> a[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;; </span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> n : a)                                     </span><br><span class="line">    std::cout &lt;&lt; n &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">   </span><br><span class="line"><span class="comment">// the initializer may be an container</span></span><br><span class="line">std::vector&lt;<span class="type">int</span>&gt; v = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="type">int</span>&amp; i : v)        <span class="comment">// access by const reference</span></span><br><span class="line">    std::cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i : v)              <span class="comment">// access by value, the type of i is int</span></span><br><span class="line">    std::cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; i : v)             <span class="comment">// access by non-const reference, the type of i is int&amp;</span></span><br><span class="line">    std::cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;    </span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span>&amp; cv = v;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp;&amp; i : cv)           <span class="comment">// access by forward reference, the type of i is const int&amp;</span></span><br><span class="line">    std::cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>different <em>type deduction</em> for <code>auto</code> of range-for loop  <a target="_blank" rel="noopener" href="https://blog.petrzemek.net/2016/08/17/auto-type-deduction-in-range-based-for-loops/">reference</a></p>
<ul>
<li><p><strong>TLDR</strong></p>
<ul>
<li><p>Use <code>auto</code> when you want to work with a copy of elements in the range.</p>
</li>
<li><p>Use <code>auto&amp;</code> when you want to modify elements in the range in non-generic code.</p>
</li>
<li><p>Use <code>auto&amp;&amp;</code> when you want to modify elements in the range in generic code.</p>
</li>
<li><p>Use <code>const auto&amp;</code> when you want read-only access to elements in the range (even in generic code).</p>
</li>
<li><p>Other variants are generally less useful.</p>
</li>
</ul>
</li>
<li><p><strong>auto</strong></p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> x : range)</span><br></pre></td></tr></table></figure>

<p>  This will create <strong>a copy of</strong> each element in the range. Therefore, use this variant <strong>when you want to work with a copy</strong>. For example, you may be iterating over a vector of strings and want to convert each string to uppercase and then pass it to a function. By using <code>auto</code>, a copy of each string will be provided for you. You can change it and pass forward.</p>
<p>  The following <strong>facts need to be kept in mind</strong> when using <code>auto</code>:</p>
<ul>
<li><p><strong>Beware of containers returning proxy objects upon dereferencing of their iterators</strong>. Use of <code>auto</code>may lead to inadvertent changes of elements in the container. For example, consider the following example, which iterates over a <code>vector of bools</code>:</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">bool</span>&gt; v&#123;<span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> x : v) &#123;</span><br><span class="line">    x = <span class="literal">true</span>; <span class="comment">// Changes the element inside v!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  After the loop ends, <code>v</code> will contain <code>true, true, true</code>, which is clearly something you would not expect. See <a target="_blank" rel="noopener" href="https://isocpp.org/blog/2012/11/on-vectorbool">this blog post</a> for more details. Here, instead of using <code>auto</code>, it is better to explicitly specify the type (<code>bool</code>). With <code>bool</code>, it will work as expected: the contents of the vector will be left unchanged.</p>
</li>
<li><p>Using just <code>auto</code> will <strong>not work</strong> when iterating over <strong>ranges containing move-only types</strong>, such as <code>std::unique_ptr</code>. As <code>auto</code> creates a copy of each element in the range, the compilation will fail because move-only types cannot be copied.</p>
</li>
</ul>
</li>
<li><p><strong>const auto</strong>[useless]</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> x : range)</span><br></pre></td></tr></table></figure>

<p>  The use of <code>const auto</code> may suggest that you want to work with an <strong>immutable copy</strong> of each element. <strong>However, when would you want this? Why not use <code>const auto&amp;</code>? Why creating a copy when you will not be able to change it?</strong> And, even if you wanted this, from a code-review standpoint, it looks like you forgot to put <code>&amp;</code> after <code>auto</code>. Therefore, I see <strong>no reason</strong> for using <code>const auto</code>. Use <code>const auto&amp;</code> instead.</p>
</li>
<li><p><strong>auto&amp;</strong></p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; x : range)</span><br></pre></td></tr></table></figure>

<p>  Use <code>auto&amp;</code> <strong>when you want to modify elements in the range in non-generic code</strong>. The first part of the previous sentence should be clear as <code>auto&amp;</code> will create references to the original elements in the range. To see why this code should not be used in generic code (e.g. inside templates), take a look at the following function template:</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sets all elements in the given range to the given value.</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Range, <span class="keyword">typename</span> Value&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">set_all_to</span><span class="params">(Range&amp; range, <span class="type">const</span> Value&amp; value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; x : range) &#123;</span><br><span class="line">        x = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  <strong>It will work. Well, most of the time. Until someone tries to use it on the dreaded <code>std::vector&lt;bool&gt;</code></strong>. Then, the example will fail to compile because <strong>dereferencing an iterator of <code>std::vector&lt;bool&gt;</code> yields a temporary proxy object</strong>, which cannot bind to an lvalue reference (<code>auto&amp;</code>). </p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::vector&lt;<span class="type">bool</span>&gt; <span class="title">v</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; e : v)</span><br><span class="line">    e = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: non-const lvalue reference to type &#x27;__bit_reference&lt;...&gt;&#x27; cannot bind to a temporary of type &#x27;__bit_reference&lt;...&gt;&#x27;</span><br></pre></td></tr></table></figure>

<p>  As we will see shortly, the solution is to use <strong>one more <code>&amp;</code></strong> when writing generic code.</p>
</li>
<li><p><strong>const auto&amp;</strong></p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; x : range)</span><br></pre></td></tr></table></figure>

<p>  Use <code>const auto&amp;</code> <strong>when you want read-only access to elements in the range</strong>, even in generic code. This is the number one choice for iterating over a range when <strong>all you want to is read</strong> its elements. <strong>No copies are made and the compiler can verify that you indeed do not modify the elements</strong>.</p>
<p>  Nevertheless, keep in mind that even though you will not be able to modify the elements in the range directly, you may still be able to modify them indirectly. For example, when the elements in the range are <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Smart_pointer">smart pointers</a>:</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">std::vector&lt;std::unique_ptr&lt;Person&gt;&gt; v;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; x : v) &#123;</span><br><span class="line">    x-&gt;name = <span class="string">&quot;John Doe&quot;</span>; <span class="comment">// This will change the name of all people in v.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  In such situations, you have to pay close attention to what you are doing because the compiler will not help you, even if you write <code>const auto&amp;</code>.</p>
</li>
<li><p><strong>auto&amp;&amp;</strong></p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp;&amp; x : range)</span><br></pre></td></tr></table></figure>

<p>  Use <code>auto&amp;&amp;</code> <strong>when you want to modify elements in the range in generic code</strong>. To elaborate, <code>auto&amp;&amp;</code> is a <a target="_blank" rel="noopener" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4164.pdf">forwarding reference</a>, also known as a <a target="_blank" rel="noopener" href="https://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers">universal reference</a>. It behaves as follows:</p>
<ul>
<li>When initialized with an <a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp/language/value_category">lvalue</a>, it creates an <a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp/language/reference">lvalue reference</a>.</li>
<li>When initialized with an <a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp/language/value_category">rvalue</a>, it creates an <a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp/language/reference">rvalue reference</a>.</li>
</ul>
<p>  A detailed explanation of forwarding references is outside of scope of the present post. For more details, see <a target="_blank" rel="noopener" href="https://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers">this article</a> by Scott Meyers. <strong>Anyway, the use of <code>auto&amp;&amp;</code> allows us to write generic loops that can also modify elements of ranges yielding proxy objects</strong>, such as our friend (or foe?) <a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp/container/vector_bool"><code>std::vector&lt;bool&gt;</code></a>:</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sets all elements in the given range to the given value.</span></span><br><span class="line"><span class="comment">// Now working even with std::vector&lt;bool&gt;.</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Range, <span class="keyword">typename</span> Value&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">set_all_to</span><span class="params">(Range&amp; range, <span class="type">const</span> Value&amp; value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp;&amp; x : range) &#123; <span class="comment">// Notice &amp;&amp; instead of &amp;.</span></span><br><span class="line">        x = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  Now, you may wonder: if <code>auto&amp;&amp;</code> works even in generic code, why should I ever use <code>auto&amp;</code>? As Howard Hinnant puts it, liberate use of <code>auto&amp;&amp;</code> results in so-called <a target="_blank" rel="noopener" href="http://stackoverflow.com/a/13130795/2580955">confuscated code</a>: code that unnecessarily confuses people. <strong>My advice is to use <code>auto&amp;</code> in non-generic code and <code>auto&amp;&amp;</code> only in generic code</strong>.</p>
<p>  By the way, there was a <a target="_blank" rel="noopener" href="http://open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3853.htm">proposal for C++1z</a> to allow writing just <code>for (x : range)</code>, which would be translated into <code>for (auto&amp;&amp; x : range)</code>. Such range-based for loops were called <a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/25468486/what-are-terse-ranged-based-for-loops">terse</a>. However, this proposal was <a target="_blank" rel="noopener" href="https://botondballo.wordpress.com/2014/11/23/trip-report-c-standards-meeting-in-urbana-champaign-november-2014/">removed from consideration</a> and will not be part of C++.</p>
</li>
<li><p><strong>const auto&amp;&amp;</strong>[useless]</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp;&amp; x : range)</span><br></pre></td></tr></table></figure>

<p>  This variant will bind only to rvalues, which you will not be able to modify or move because of the <code>const</code>. This makes it less than useless. Hence, there is <strong>no reason</strong> for choosing this variant over <code>const auto&amp;</code>.</p>
</li>
<li><p><strong>decltype(auto)</strong></p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">decltype</span>(<span class="keyword">auto</span>) x : range) <span class="comment">// C++14</span></span><br></pre></td></tr></table></figure>

<p>  <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/C++14">C++14</a> introduced <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/C++14#Alternate_type_deduction_on_declaration"><code>decltype(auto)</code></a>. It means: apply automatic type deduction, but use <a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp/language/decltype"><code>decltype</code></a> rules. Whereas <code>auto</code> strips down top-level <a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp/language/cv">cv qualifiers</a> and references, <code>decltype</code> preserves them.</p>
<p>  As is stated in <a target="_blank" rel="noopener" href="https://isocpp.org/wiki/faq/cpp14-language#decltype-auto">this C++ FAQ</a>, <code>decltype(auto)</code> is primarily useful for deducing the return type of forwarding functions and similar wrappers. However, it is not intended to be a widely used feature beyond that. And indeed, <a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/38421392/range-based-for-loop-with-decltypeauto">there seems to be <strong>no reason</strong> for using it in range-based for loops</a>.</p>
</li>
</ul>
</li>
</ul>
<h3 id="try-catch"><a href="#try-catch" class="headerlink" title="try catch"></a>try catch</h3><ul>
<li><p>try catch 有三种形式</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1) Catch-clause that declares a named formal parameter</span></span><br><span class="line"><span class="keyword">try</span> &#123; <span class="comment">/* */</span> &#125; <span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp; e) &#123; <span class="comment">/* */</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2) Catch-clause that declares an unnamed parameter</span></span><br><span class="line"><span class="keyword">try</span> &#123; <span class="comment">/* */</span> &#125; <span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp;) &#123; <span class="comment">/* */</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3) Catch-all handler, which is activated for any exception</span></span><br><span class="line"><span class="keyword">try</span> &#123; <span class="comment">/* */</span> &#125; <span class="built_in">catch</span> (...) &#123; <span class="comment">/* */</span> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>example code</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="built_in">f</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (<span class="type">const</span> std::overflow_error&amp; e)</span><br><span class="line">&#123;&#125; <span class="comment">// this executes if f() throws std::overflow_error (same type rule)</span></span><br><span class="line"><span class="built_in">catch</span> (<span class="type">const</span> std::runtime_error&amp; e)</span><br><span class="line">&#123;&#125; <span class="comment">// this executes if f() throws std::underflow_error (base class rule)</span></span><br><span class="line"><span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp; e)</span><br><span class="line">&#123;&#125; <span class="comment">// this executes if f() throws std::logic_error (base class rule)</span></span><br><span class="line"><span class="built_in">catch</span> (...)</span><br><span class="line">&#123;&#125; <span class="comment">// this executes if f() throws std::string or int or any other unrelated type</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果最后还是没有匹配的exception handler，会调用<code>std::terminate</code></p>
</li>
</ul>
<h3 id="break-x2F-continue-x2F-goto"><a href="#break-x2F-continue-x2F-goto" class="headerlink" title="break&#x2F;continue&#x2F;goto"></a>break&#x2F;continue&#x2F;goto</h3><ul>
<li><p>break仅仅作用于最近的循环或者switch，不要期望一个break可以跳出多重循环;</p>
</li>
<li><p>continue只能用于for、while、do while中，包含range for；</p>
</li>
<li><p>goto语句的标签标示符独立于变量和其他标示符的名字，因为goto标签标示符可以和程序中的其他实体的标示符使用同一个名字而不会互相干扰；</p>
</li>
<li><p>try block里面定义的变量在catch里面是无法访问的，类似于do while里面while定义的变量在loop body里面不能访问、switch语句后面case里面定义的变量前面case不能访问一样</p>
</li>
<li><p>try catch寻找exception handler的顺序和函数调用顺序相反，出现exception的时候往调用函数的反方向找，一直找到可以处理的catch语句为止，没有找到的时候会程序调用terminate，非正常退出；</p>
</li>
</ul>
<h3 id="misc"><a href="#misc" class="headerlink" title="misc"></a>misc</h3><ul>
<li>cpp支持空语句，比如使用循环的时候，在循环的条件部分就能达成自己的目的，则可以循环空语句；写空语句要加上注释表明故意为空；</li>
</ul>

    </div>

    
    
    
      


    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>PangWong
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://pangwong.github.io/blog/2022/05/cpp-primer-chapter5/" title="Reading Note of CppPrimer-Chapter5">https://pangwong.github.io/blog/2022/05/cpp-primer-chapter5/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/reading-notes/" rel="tag"><i class="fa fa-tag"></i> reading notes</a>
              <a href="/tags/cpp-primer/" rel="tag"><i class="fa fa-tag"></i> cpp-primer</a>
              <a href="/tags/statement/" rel="tag"><i class="fa fa-tag"></i> statement</a>
              <a href="/tags/condition/" rel="tag"><i class="fa fa-tag"></i> condition</a>
              <a href="/tags/loop/" rel="tag"><i class="fa fa-tag"></i> loop</a>
              <a href="/tags/switch/" rel="tag"><i class="fa fa-tag"></i> switch</a>
              <a href="/tags/range-for/" rel="tag"><i class="fa fa-tag"></i> range-for</a>
              <a href="/tags/try-catch/" rel="tag"><i class="fa fa-tag"></i> try-catch</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/blog/2022/05/cpp-primer-chapter6/" rel="prev" title="Reading Note of CppPrimer-Chapter6">
                  <i class="fa fa-chevron-left"></i> Reading Note of CppPrimer-Chapter6
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/blog/2022/05/cpp-primer-chapter4/" rel="next" title="Reading Note of CppPrimer-Chapter4">
                  Reading Note of CppPrimer-Chapter4 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">PangWong</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">201k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">3:02</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"pangwong","repo":"pangwong.github.io","client_id":"c3a7ca3ecf4f08f74acb","client_secret":"db3623e99a388c18ba10413186f9051a35cb6627","admin_user":"pangwong","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"8cd4e1c345d03c9e3e384a3194574d13"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
